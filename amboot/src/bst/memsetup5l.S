/**
 * system/src/bst/memsetup5l.S
 *
 * History:
 *    2009/11/02 - [Allen Wang] created file
 *
 * Copyright (C) 2004-2009, Ambarella, Inc.
 *
 * All rights reserved. No Part of this file may be reproduced, stored
 * in a retrieval system, or transmitted, in any form, or by any means,
 * electronic, mechanical, photocopying, recording, or otherwise,
 * without the prior consent of Ambarella, Inc.
 */

#include <ambhw.h>

/*
 * Setup Powe-On-Config or user specific DDR2 constants.
 */
#if 	defined(FIX_DRAM_135MHZ)
#define DRAM_EXT_MODE0_VAL	DRAM_EXT_MODE0_VAL_135MHZ
#define DRAM_EXT_MODE1_VAL	DRAM_EXT_MODE1_VAL_135MHZ
#define DRAM_EXT_MODE2_VAL	DRAM_EXT_MODE2_VAL_135MHZ
#define DRAM_EXT_MODE3_VAL	DRAM_EXT_MODE3_VAL_135MHZ
#define DRAM_TIMING1_VAL	DRAM_TIMING1_VAL_135MHZ
#define DRAM_TIMING2_VAL	DRAM_TIMING2_VAL_135MHZ
#define DRAM_TIMING3_VAL	DRAM_TIMING3_VAL_135MHZ
#elif 	defined(FIX_DRAM_162MHZ)
#define DRAM_EXT_MODE0_VAL	DRAM_EXT_MODE0_VAL_162MHZ
#define DRAM_EXT_MODE1_VAL	DRAM_EXT_MODE1_VAL_162MHZ
#define DRAM_EXT_MODE2_VAL	DRAM_EXT_MODE2_VAL_162MHZ
#define DRAM_EXT_MODE3_VAL	DRAM_EXT_MODE3_VAL_162MHZ
#define DRAM_TIMING1_VAL	DRAM_TIMING1_VAL_162MHZ
#define DRAM_TIMING2_VAL	DRAM_TIMING2_VAL_162MHZ
#define DRAM_TIMING3_VAL	DRAM_TIMING3_VAL_162MHZ
#elif 	defined(FIX_DRAM_180MHZ)
#define DRAM_EXT_MODE0_VAL	DRAM_EXT_MODE0_VAL_180MHZ
#define DRAM_EXT_MODE1_VAL	DRAM_EXT_MODE1_VAL_180MHZ
#define DRAM_EXT_MODE2_VAL	DRAM_EXT_MODE2_VAL_180MHZ
#define DRAM_EXT_MODE3_VAL	DRAM_EXT_MODE3_VAL_180MHZ
#define DRAM_TIMING1_VAL	DRAM_TIMING1_VAL_180MHZ
#define DRAM_TIMING2_VAL	DRAM_TIMING2_VAL_180MHZ
#define DRAM_TIMING3_VAL	DRAM_TIMING3_VAL_180MHZ
#elif	defined(PWC_DRAM_216MHZ) || defined(FIX_DRAM_216MHZ)
#define DRAM_EXT_MODE0_VAL	DRAM_EXT_MODE0_VAL_216MHZ
#define DRAM_EXT_MODE1_VAL	DRAM_EXT_MODE1_VAL_216MHZ
#define DRAM_EXT_MODE2_VAL	DRAM_EXT_MODE2_VAL_216MHZ
#define DRAM_EXT_MODE3_VAL	DRAM_EXT_MODE3_VAL_216MHZ
#define DRAM_TIMING1_VAL	DRAM_TIMING1_VAL_216MHZ
#define DRAM_TIMING2_VAL	DRAM_TIMING2_VAL_216MHZ
#define DRAM_TIMING3_VAL	DRAM_TIMING3_VAL_216MHZ
#elif 	defined(FIX_DRAM_240MHZ)
#define DRAM_EXT_MODE0_VAL	DRAM_EXT_MODE0_VAL_240MHZ
#define DRAM_EXT_MODE1_VAL	DRAM_EXT_MODE1_VAL_240MHZ
#define DRAM_EXT_MODE2_VAL	DRAM_EXT_MODE2_VAL_240MHZ
#define DRAM_EXT_MODE3_VAL	DRAM_EXT_MODE3_VAL_240MHZ
#define DRAM_TIMING1_VAL	DRAM_TIMING1_VAL_240MHZ
#define DRAM_TIMING2_VAL	DRAM_TIMING2_VAL_240MHZ
#define DRAM_TIMING3_VAL	DRAM_TIMING3_VAL_240MHZ
#elif 	defined(FIX_DRAM_270MHZ)
#define DRAM_EXT_MODE0_VAL	DRAM_EXT_MODE0_VAL_270MHZ
#define DRAM_EXT_MODE1_VAL	DRAM_EXT_MODE1_VAL_270MHZ
#define DRAM_EXT_MODE2_VAL	DRAM_EXT_MODE2_VAL_270MHZ
#define DRAM_EXT_MODE3_VAL	DRAM_EXT_MODE3_VAL_270MHZ
#define DRAM_TIMING1_VAL	DRAM_TIMING1_VAL_270MHZ
#define DRAM_TIMING2_VAL	DRAM_TIMING2_VAL_270MHZ
#define DRAM_TIMING3_VAL	DRAM_TIMING3_VAL_270MHZ
#elif 	defined(PWC_DRAM_288MHZ)
#define DRAM_EXT_MODE0_VAL	DRAM_EXT_MODE0_VAL_288MHZ
#define DRAM_EXT_MODE1_VAL	DRAM_EXT_MODE1_VAL_288MHZ
#define DRAM_EXT_MODE2_VAL	DRAM_EXT_MODE2_VAL_288MHZ
#define DRAM_EXT_MODE3_VAL	DRAM_EXT_MODE3_VAL_288MHZ
#define DRAM_TIMING1_VAL	DRAM_TIMING1_VAL_288MHZ
#define DRAM_TIMING2_VAL	DRAM_TIMING2_VAL_288MHZ
#define DRAM_TIMING3_VAL	DRAM_TIMING3_VAL_288MHZ
#elif   defined(PWC_DRAM_300MHZ) || defined(FIX_DRAM_300MHZ)
#define DRAM_EXT_MODE0_VAL	DRAM_EXT_MODE0_VAL_300MHZ
#define DRAM_EXT_MODE1_VAL	DRAM_EXT_MODE1_VAL_300MHZ
#define DRAM_EXT_MODE2_VAL	DRAM_EXT_MODE2_VAL_300MHZ
#define DRAM_EXT_MODE3_VAL	DRAM_EXT_MODE3_VAL_300MHZ
#define DRAM_TIMING1_VAL	DRAM_TIMING1_VAL_300MHZ
#define DRAM_TIMING2_VAL	DRAM_TIMING2_VAL_300MHZ
#define DRAM_TIMING3_VAL	DRAM_TIMING3_VAL_300MHZ
#elif   defined(PWC_DRAM_324MHZ) || defined(FIX_DRAM_324MHZ) || defined(FIX_DRAM_MAXMHZ)
#define DRAM_EXT_MODE0_VAL	DRAM_EXT_MODE0_VAL_324MHZ
#define DRAM_EXT_MODE1_VAL	DRAM_EXT_MODE1_VAL_324MHZ
#define DRAM_EXT_MODE2_VAL	DRAM_EXT_MODE2_VAL_324MHZ
#define DRAM_EXT_MODE3_VAL	DRAM_EXT_MODE3_VAL_324MHZ
#define DRAM_TIMING1_VAL	DRAM_TIMING1_VAL_324MHZ
#define DRAM_TIMING2_VAL	DRAM_TIMING2_VAL_324MHZ
#define DRAM_TIMING3_VAL	DRAM_TIMING3_VAL_324MHZ
#endif

/*
 * Setup PLL constants.
 */
#if	defined(FIX_DRAM_108MHZ)
#define RCT_DDR_PLL_CTRL_VAL    0x08100000
#elif	defined(FIX_DRAM_135MHZ)
#define RCT_DDR_PLL_CTRL_VAL    0x0e132000
#elif	defined(FIX_DRAM_162MHZ)
#define RCT_DDR_PLL_CTRL_VAL    0x08112100
#elif	defined(FIX_DRAM_180MHZ)
#define RCT_DDR_PLL_CTRL_VAL   	0x0e111100
#elif	defined(FIX_DRAM_216MHZ)
#define RCT_DDR_PLL_CTRL_VAL    0x08101000
#elif	defined(FIX_DRAM_240MHZ)
#define RCT_DDR_PLL_CTRL_VAL    0x09113100
#elif	defined(FIX_DRAM_270MHZ)
#define RCT_DDR_PLL_CTRL_VAL    0x0e112100
#elif	defined(FIX_DRAM_300MHZ)
#define RCT_DDR_PLL_CTRL_VAL    0x18111100
#elif	defined(FIX_DRAM_324MHZ)
#define RCT_DDR_PLL_CTRL_VAL    0x1a111100
#elif	defined(FIX_DRAM_336MHZ)
#define RCT_DDR_PLL_CTRL_VAL    0x1b111100
#else
#define RCT_DDR_PLL_CTRL_VAL    0xffffffff
#endif

.data
dram_params_table:

glo_dram_cg_ddr_init:	.word	RCT_CG_DDR_INIT
glo_dram_cg_ddr_normal:	.word	RCT_CG_DDR_NORMAL
glo_dram_cfg:		.word	DRAM_CFG_VAL
pwc_dram_ext_mode0:	.word	DRAM_EXT_MODE0_VAL
pwc_dram_ext_mode1:	.word	DRAM_EXT_MODE1_VAL
pwc_dram_ext_mode2:	.word	DRAM_EXT_MODE2_VAL
pwc_dram_ext_mode3:	.word	DRAM_EXT_MODE3_VAL
pwc_dram_timing1:	.word	DRAM_TIMING1_VAL
pwc_dram_timing2:	.word	DRAM_TIMING2_VAL
pwc_dram_timing3:	.word	DRAM_TIMING3_VAL
pwc_dram_dqs_sync:	.word	DRAM_DQS_SYNC_VAL
pwc_dram_pad_term:	.word	DRAM_PAD_TERM_VAL
pwc_dram_qz_calib:	.word	DRAM_ZQ_CALIB
pwc_dll0:		.word	RCT_DLL0_VAL
pwc_dll1:		.word	RCT_DLL1_VAL
pwc_dll_ctrl_sel:	.word	RCT_DLL_CTRL_SEL_VAL
pwc_ddrio_post_scale:	.word	RCT_DDRIO_POST_SCALER_VAL
pll_ddr_ctrl2_val:	.word	0x3f710000
pll_ddr_ctrl3_val:	.word	0x00068300
glo_dram_mode_rstlpdd2:	.word	DRAM_MODE_REG63_RESET_LPDDR2
pll_ctrl_val:		.word   RCT_DDR_PLL_CTRL_VAL
end_dram_table :

#if defined(DRAM_TYPE_DDR2) || defined(DRAM_TYPE_DDR3)
#include "memsetup5l_ddr2_ddr3.h"
#elif defined(DRAM_TYPE_LPDDR)
#include "memsetup5l_lpddr.h"
#elif defined(DRAM_TYPE_LPDDR2)
#include "memsetup5l_lpddr2.h"
#endif
