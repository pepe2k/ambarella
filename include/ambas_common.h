/*
 * include/ambas_common.h
 *
 * History:
 *    2008/10/23 - [Anthony Ginger] Create
 *
 * Copyright (C) 2004-2008, Ambarella, Inc.
 *
 * All rights reserved. No Part of this file may be reproduced, stored
 * in a retrieval system, or transmitted, in any form, or by any means,
 * electronic, mechanical, photocopying, recording, or otherwise,
 * without the prior consent of Ambarella, Inc.
 */

#ifndef __AMBAS_COMMON_H
#define __AMBAS_COMMON_H

#define AMBA_ERR_FUNC_NOT_SUPPORTED		(-248)

/*=========================Start AMBA_VIDEO_INFO==============================*/

#define AMBA_VIDEO_FPS(fps)			(512000000 / fps)
#define AMBA_VIDEO_FPS_AUTO			0			//0
#define AMBA_VIDEO_FPS_1			512000000		//(512000000 / 1)
#define AMBA_VIDEO_FPS_2			256000000		//(512000000 / 2)
#define AMBA_VIDEO_FPS_3			170666667		//(512000000 / 3)
#define AMBA_VIDEO_FPS_4			128000000		//(512000000 / 4)
#define AMBA_VIDEO_FPS_5			102400000		//(512000000 / 5)
#define AMBA_VIDEO_FPS_6			85333333		//(512000000 / 6)
#define AMBA_VIDEO_FPS_10			51200000		//(512000000 / 10)
#define AMBA_VIDEO_FPS_12			42666667		//(512000000 / 12)
#define AMBA_VIDEO_FPS_13			39384615		//(512000000 / 13)
#define AMBA_VIDEO_FPS_14			36571428		//(512000000 / 14)
#define AMBA_VIDEO_FPS_15			34133333		//(512000000 / 15)
#define AMBA_VIDEO_FPS_20			25600000		//(512000000 / 20)
#define AMBA_VIDEO_FPS_24			21333333		//(512000000 / 24)
#define AMBA_VIDEO_FPS_25			20480000		//(512000000 / 25)
#define AMBA_VIDEO_FPS_30			17066667		//(512000000 / 30)
#define AMBA_VIDEO_FPS_50			10240000		//(512000000 / 50)
#define AMBA_VIDEO_FPS_60			8533333			//(512000000 / 60)
#define AMBA_VIDEO_FPS_120			4266667			//(512000000 / 120)
#define AMBA_VIDEO_FPS_29_97			17083750		//(512000000 / 2997 * 100)
#define AMBA_VIDEO_FPS_59_94			8541875			//(512000000 / 5994 * 100)
#define AMBA_VIDEO_FPS_23_976			21354688		//(512000000 / 23976 * 1000)
#define AMBA_VIDEO_FPS_12_5			40960000		//(512000000 / 25 * 2)
#define AMBA_VIDEO_FPS_6_25			81920000		//(512000000 / 25 * 4)
#define AMBA_VIDEO_FPS_3_125			163840000		//(512000000 / 25 * 8)
#define AMBA_VIDEO_FPS_7_5			68266667		//(512000000 / 15 * 2)
#define AMBA_VIDEO_FPS_3_75			136533333		//(512000000 / 15 * 4)

#define AMBA_VIDEO_FORMAT(format)		(format)
#define AMBA_VIDEO_FORMAT_AUTO			AMBA_VIDEO_FORMAT(0)
#define AMBA_VIDEO_FORMAT_INTERLACE		AMBA_VIDEO_FORMAT(1)
#define AMBA_VIDEO_FORMAT_PROGRESSIVE		AMBA_VIDEO_FORMAT(2)

#define AMBA_VIDEO_TYPE(type)			(type)
#define AMBA_VIDEO_TYPE_AUTO			AMBA_VIDEO_TYPE(0)
#define AMBA_VIDEO_TYPE_YUV_601			AMBA_VIDEO_TYPE(1)
#define AMBA_VIDEO_TYPE_YUV_656			AMBA_VIDEO_TYPE(2)
#define AMBA_VIDEO_TYPE_RGB_601			AMBA_VIDEO_TYPE(3)
#define AMBA_VIDEO_TYPE_RGB_656			AMBA_VIDEO_TYPE(4)
#define AMBA_VIDEO_TYPE_RGB_RAW			AMBA_VIDEO_TYPE(5)	//Sensor
#define AMBA_VIDEO_TYPE_YUV_BT1120 		AMBA_VIDEO_TYPE(6)
#define AMBA_VIDEO_TYPE_RGB_BT1120 		AMBA_VIDEO_TYPE(7)

#define AMBA_VIDEO_TYPE_IS_YUV(type) 	(((type) == AMBA_VIDEO_TYPE_YUV_601) || ((type) == AMBA_VIDEO_TYPE_YUV_656) ||	\
										((type) == AMBA_VIDEO_TYPE_YUV_BT1120))

#define AMBA_VIDEO_BITS(bits)			(bits)
#define AMBA_VIDEO_BITS_AUTO			AMBA_VIDEO_BITS(0)
#define AMBA_VIDEO_BITS_8			AMBA_VIDEO_BITS(8)
#define AMBA_VIDEO_BITS_10			AMBA_VIDEO_BITS(10)
#define AMBA_VIDEO_BITS_12			AMBA_VIDEO_BITS(12)
#define AMBA_VIDEO_BITS_14			AMBA_VIDEO_BITS(14)
#define AMBA_VIDEO_BITS_16			AMBA_VIDEO_BITS(16)

#define AMBA_VIDEO_RATIO(ratio)			(ratio)
#define AMBA_VIDEO_RATIO_AUTO			AMBA_VIDEO_RATIO(0)
#define AMBA_VIDEO_RATIO_4_3			AMBA_VIDEO_RATIO(1)
#define AMBA_VIDEO_RATIO_16_9			AMBA_VIDEO_RATIO(2)
#define AMBA_VIDEO_RATIO_1_1			AMBA_VIDEO_RATIO(4)

#define AMBA_VIDEO_SYSTEM_AUTO			(0x0)
#define AMBA_VIDEO_SYSTEM_NTSC			(0x1)
#define AMBA_VIDEO_SYSTEM_PAL			(0x2)
#define AMBA_VIDEO_SYSTEM_SECAM			(0x4)
#define AMBA_VIDEO_SYSTEM_ALL			(0xF)

/*============================================================================*/
struct amba_video_info {
	u32	width;
	u32	height;
	u32	fps;
	u8	format;
	u8	type;
	u8	bits;
	u8	ratio;
	u8	system;
	u8	flip;
	u8	rotate;
	u16	rev;
	u8	pattern;
};

/* ======================= Standard format defines ========================== */
enum amba_video_mode {
	AMBA_VIDEO_MODE_MISC_FIRST	= 0,
	AMBA_VIDEO_MODE_AUTO		= 0,

	AMBA_VIDEO_MODE_320_240		= 1,		//320x240
	AMBA_VIDEO_MODE_320_288		= 2,		//320x288
	AMBA_VIDEO_MODE_360_240		= 3,		//360x240
	AMBA_VIDEO_MODE_360_288		= 4,		//360x288
	AMBA_VIDEO_MODE_480_240		= 5,		//480x240
	AMBA_VIDEO_MODE_720_240		= 6,		//720x240
	AMBA_VIDEO_MODE_960_240		= 7,		//960x240
	AMBA_VIDEO_MODE_VGA		= 8,		//640x480
	AMBA_VIDEO_MODE_SVGA		= 9,		//800x600
	AMBA_VIDEO_MODE_XGA		= 10,		//1024x768
	AMBA_VIDEO_MODE_SXGA		= 11,		//1280x1024
	AMBA_VIDEO_MODE_UXGA		= 12,		//1600x1200
	AMBA_VIDEO_MODE_QXGA		= 13,		//2048x1536
	AMBA_VIDEO_MODE_WVGA		= 14,		//800x480
	AMBA_VIDEO_MODE_WSVGA		= 15,		//1024x600
	AMBA_VIDEO_MODE_1280_960	= 16,		//1280x960
	AMBA_VIDEO_MODE_WXGA		= 17,		//1280x800
	AMBA_VIDEO_MODE_WSXGA		= 18,		//1440x900
	AMBA_VIDEO_MODE_WSXGAP		= 19,		//1680x1050
	AMBA_VIDEO_MODE_WUXGA		= 20,		//1920x1200

	/* Add new format below and update AMBA_VIDEO_MODE_NUM */
	AMBA_VIDEO_MODE_480_640		= 21,		//480x640
	AMBA_VIDEO_MODE_SXGAP		= 22,		//1400x1050
	AMBA_VIDEO_MODE_QSXGA		= 23,		//2592x1944
	AMBA_VIDEO_MODE_HVGA		= 24,		//320x480
	AMBA_VIDEO_MODE_480_800		= 25,		//480x800
	AMBA_VIDEO_MODE_2048_1152	= 26,		//2048x1152
	AMBA_VIDEO_MODE_1920_1440	= 27,		//1920x1440
	AMBA_VIDEO_MODE_2560x1440	= 28,		//2560x1440, 3.7MP
	AMBA_VIDEO_MODE_2208x1242	= 29,		//2208x1242, 2.7MP
	AMBA_VIDEO_MODE_2304x1296	= 30,		//2304x1296
	AMBA_VIDEO_MODE_2304x1536	= 31,		//2304x1536, 3.4MP
	AMBA_VIDEO_MODE_240_400		= 32,		//240x400
	AMBA_VIDEO_MODE_2160P30		= 33,		//3840x2160@30fps
	AMBA_VIDEO_MODE_2160P25		= 34,		//3840x2160@25fps
	AMBA_VIDEO_MODE_2160P24		= 35,		//3840x2160@24fps
	AMBA_VIDEO_MODE_2160P24_SE	= 36,		//4096x2160@24fps, SMPTE
	AMBA_VIDEO_MODE_HDMI_NATIVE	= 37,		//Best Native Resolution
	AMBA_VIDEO_MODE_720P24		= 38,		//720p24
	AMBA_VIDEO_MODE_720P25		= 39,		//720p25
	AMBA_VIDEO_MODE_720P30		= 40,		//720p30
	AMBA_VIDEO_MODE_1296P60		= 41,		//2304x1296@60fps
	AMBA_VIDEO_MODE_1152x648	= 42,		//1152x648
	AMBA_VIDEO_MODE_4096x2160	= 43,		//4096x2160
	AMBA_VIDEO_MODE_4016x3016	= 44,		//4016x3016
	AMBA_VIDEO_MODE_4000x3000	= 45,		//4000x3000
	AMBA_VIDEO_MODE_960_540		= 46,		//960x540
	AMBA_VIDEO_MODE_3280_2464	= 47,		//3280x2464
	AMBA_VIDEO_MODE_3280_1852	= 48,		//3280x1852
	AMBA_VIDEO_MODE_2520_1424	= 49,		//2520x1424
	AMBA_VIDEO_MODE_1640_1232	= 50,		//1640x1232
	AMBA_VIDEO_MODE_2048_1080	= 51,		//2048x1080
	AMBA_VIDEO_MODE_3840x2160	= 52,		//3840x2160
	AMBA_VIDEO_MODE_768_512		= 53,		//768x512
	AMBA_VIDEO_MODE_FWVGA		= 54,		//854x480
	AMBA_VIDEO_MODE_1296_972 	= 55,		//1296x972
	AMBA_VIDEO_MODE_640_400 	= 56,		//640x400
	AMBA_VIDEO_MODE_1296_1032 	= 57,		//1296x1032
	AMBA_VIDEO_MODE_3264_2448 	= 58,		//3264x2448
	AMBA_VIDEO_MODE_2304_1836 	= 59,		//2304x1836
	AMBA_VIDEO_MODE_3264_1836 	= 60,		//3264x1836
	AMBA_VIDEO_MODE_2208_1836 	= 61,		//2208x1836
	AMBA_VIDEO_MODE_1280_918 	= 62,		//1280x918
	AMBA_VIDEO_MODE_816_612 	= 63,		//816x612
	AMBA_VIDEO_MODE_320_306 	= 64,		//320x306
	AMBA_VIDEO_MODE_3072_2048 	= 65,		//3072x2048
	AMBA_VIDEO_MODE_2592_1944 	= 66,		//2592x1944
	AMBA_VIDEO_MODE_1536_1024 	= 67,		//1536x1024
	AMBA_VIDEO_MODE_2560_2048 	= 68,		//2560x2048
	AMBA_VIDEO_MODE_1984x1116	= 69,		//1984x1116
	AMBA_VIDEO_MODE_4952x3288	= 70,		//4952x3288
	AMBA_VIDEO_MODE_5760x1080	= 71,		//5760x1080
	AMBA_VIDEO_MODE_6144x1536	= 72,		//6144x1536
	AMBA_VIDEO_MODE_7776x1944	= 73,		//7776x1944
	AMBA_VIDEO_MODE_7680x1080	= 74,		//7680x1080
	AMBA_VIDEO_MODE_8192x1536	= 75,		//8192x1536
	AMBA_VIDEO_MODE_10368x1944	= 76,		//10368x1944
	AMBA_VIDEO_MODE_1920x2160	= 77,		//1920x2160
	AMBA_VIDEO_MODE_2688x1520	= 78,		//2688x1520
	AMBA_VIDEO_MODE_5472_3648	= 79,		//5472x3648
	AMBA_VIDEO_MODE_2736_1536	= 80,		//2736x1536
	AMBA_VIDEO_MODE_2736_1824	= 81,		//2736x1824
	AMBA_VIDEO_MODE_1824_1216	= 82,		//1824x1216
	AMBA_VIDEO_MODE_4644_3506	= 83,		//4644x3506
	AMBA_VIDEO_MODE_4644_2612	= 84,		//4644x2612
	AMBA_VIDEO_MODE_4644_2332	= 85,		//4644x2332
	AMBA_VIDEO_MODE_4644_2160	= 86,		//4644x2160
	AMBA_VIDEO_MODE_2320_1748	= 87,		//2320x1748
	AMBA_VIDEO_MODE_2320_1352	= 88,		//2320x1352
	AMBA_VIDEO_MODE_1544_1168	= 89,		//1544x1168
	AMBA_VIDEO_MODE_1544_692	= 90,		//1544x692

	AMBA_VIDEO_MODE_MISC_LAST,

	AMBA_VIDEO_MODE_OFF		= 0xF000,
	//Still Standard
	AMBA_VIDEO_MODE_STILL_FIRST	= 0xFFE0,
	AMBA_VIDEO_MODE_3M_4_3		= 0xFFE0,
	AMBA_VIDEO_MODE_3M_16_9		= 0xFFE1,
	AMBA_VIDEO_MODE_4M_4_3		= 0xFFE2,
	AMBA_VIDEO_MODE_4M_16_9		= 0xFFE3,
	AMBA_VIDEO_MODE_5M_4_3		= 0xFFE4,
	AMBA_VIDEO_MODE_5M_16_9		= 0xFFE5,		//2976x1674
	AMBA_VIDEO_MODE_STILL_LAST,

	//Video Standard
	AMBA_VIDEO_MODE_STANDARD_FIRST	= 0xFFF0,
	AMBA_VIDEO_MODE_480I		= 0xFFF0,
	AMBA_VIDEO_MODE_576I		= 0xFFF1,
	AMBA_VIDEO_MODE_D1_NTSC		= 0xFFF2,	//480p
	AMBA_VIDEO_MODE_D1_PAL		= 0xFFF3,	//576p
	AMBA_VIDEO_MODE_720P		= 0xFFF4,
	AMBA_VIDEO_MODE_720P_PAL	= 0xFFF5,	//720p50
	AMBA_VIDEO_MODE_1080I		= 0xFFF6,
	AMBA_VIDEO_MODE_1080I_PAL	= 0xFFF7,	//1080i50
	AMBA_VIDEO_MODE_1080P		= 0xFFF8,
	AMBA_VIDEO_MODE_1080P_PAL	= 0xFFF9,	//1080p50
	AMBA_VIDEO_MODE_1080I48		= 0xFFFA,	//1080i48
	AMBA_VIDEO_MODE_1080P24		= 0xFFFB,	//1080p24
	AMBA_VIDEO_MODE_1080P25		= 0xFFFC,	//1080p25
	AMBA_VIDEO_MODE_1080P30		= 0xFFFD,	//1080p30
	AMBA_VIDEO_MODE_1080P60		= 0xFFFE,
	AMBA_VIDEO_MODE_STANDARD_LAST	= 0xFFFF,

	AMBA_VIDEO_MODE_TEST		= 0xFFFE,
	AMBA_VIDEO_MODE_MAX		= 0xFFFF,
};

#define AMBA_VIDEO_MODE_MISC_NUM	(AMBA_VIDEO_MODE_MISC_LAST - AMBA_VIDEO_MODE_MISC_FIRST)
#define AMBA_VIDEO_MODE_STILL_NUM	(AMBA_VIDEO_MODE_STILL_LAST - AMBA_VIDEO_MODE_STILL_FIRST)
#define AMBA_VIDEO_MODE_STANDARD_NUM	(AMBA_VIDEO_MODE_STANDARD_LAST - AMBA_VIDEO_MODE_STANDARD_FIRST)
#define AMBA_VIDEO_MODE_NUM		(AMBA_VIDEO_MODE_MISC_NUM + AMBA_VIDEO_MODE_STILL_NUM + AMBA_VIDEO_MODE_STANDARD_NUM)
#define AMBA_VIDEO_STANDARD_MODE(info)	(((u32)(info) >> 0) & 0xFFFF)

/*============================================================================*/
#define AMBA_VIDEO_PAL_W			(720)
#define AMBA_VIDEO_PAL_H			(576)

#define AMBA_VIDEO_NTSC_W			(720)
#define AMBA_VIDEO_NTSC_H			(480)

#define AMBA_VIDEO_720P_W			(1280)
#define AMBA_VIDEO_720P_H			(720)

#define AMBA_VIDEO_1080P_W			(1920)
#define AMBA_VIDEO_1080P_H			(1080)

#define AMBA_VIDEO_VGA_W			(640)
#define AMBA_VIDEO_VGA_H			(480)

#define AMBA_VIDEO_SVGA_W			(800)
#define AMBA_VIDEO_SVGA_H			(600)

#define AMBA_VIDEO_XGA_W			(1024)
#define AMBA_VIDEO_XGA_H			(768)

#define AMBA_VIDEO_WXGA_W			(1280)
#define AMBA_VIDEO_WXGA_H			(800)

#define AMBA_VIDEO_SXGA_W			(1280)
#define AMBA_VIDEO_SXGA_H			(1024)

#define AMBA_VIDEO_WSXGA_W			(1440)
#define AMBA_VIDEO_WSXGA_H			(900)

#define AMBA_VIDEO_WSXGAP_W			(1680)
#define AMBA_VIDEO_WSXGAP_H			(1050)

#define AMBA_VIDEO_UXGA_W			(1600)
#define AMBA_VIDEO_UXGA_H			(1200)

#define AMBA_VIDEO_WUXGA_W			(1920)
#define AMBA_VIDEO_WUXGA_H			(1200)

/* Timinig of standard video signals */
#define YUV525I_Y_PELS_PER_LINE			(858)
#define YUV525I_UV_PELS_PER_LINE		(YUV525I_Y_PELS_PER_LINE >> 1)
#define YUV625I_Y_PELS_PER_LINE			(864)
#define YUV625I_UV_PELS_PER_LINE		(YUV625I_Y_PELS_PER_LINE >> 1)

#define YUV720P_Y_PELS_PER_LINE			(1650)
#define YUV720P_UV_PELS_PER_LINE		(YUV720P_Y_PELS_PER_LINE >> 1)
#define YUV1080I_Y_PELS_PER_LINE		(2200)
#define YUV1080I_UV_PELS_PER_LINE		(YUV1080I_Y_PELS_PER_LINE >> 1)
#define YUV1080P_Y_PELS_PER_LINE		(2200)

#define YUV720P50_Y_PELS_PER_LINE		(1980)
#define YUV720P50_UV_PELS_PER_LINE		(YUV720P50_Y_PELS_PER_LINE >> 1)
#define YUV1080I50_Y_PELS_PER_LINE		(2640)
#define YUV1080I50_UV_PELS_PER_LINE		(YUV1080I50_Y_PELS_PER_LINE >> 1)
#define YUV1080P50_Y_PELS_PER_LINE		(2640)

/* Timinig of active video signals */
/* SD */
#define YUV525I_ACT_LINES_PER_FRM		(480)
#define YUV525I_ACT_LINES_PER_FLD		(YUV525I_ACT_LINES_PER_FRM >> 1)
#define YUV525I_DEFAULT_FRAME_RATE		AMBA_VIDEO_FPS_29_97
#define YUV480P_DEFAULT_FRAME_RATE		AMBA_VIDEO_FPS_59_94

#define YUV625I_ACT_LINES_PER_FRM		(576)
#define YUV625I_ACT_LINES_PER_FLD		(YUV625I_ACT_LINES_PER_FRM >> 1)
#define YUV625I_DEFAULT_FRAME_RATE		AMBA_VIDEO_FPS_25
#define YUV576P_DEFAULT_FRAME_RATE		AMBA_VIDEO_FPS_50

#define SD_Y_ACT_PELS_PER_LINE			(720)
#define SD_UV_ACT_PELS_PER_LINE			(SD_Y_ACT_PELS_PER_LINE >> 1)

/* 720p */
#define YUV720P_ACT_LINES_PER_FRM		(720)
#define YUV720P_DEFAULT_FRAME_RATE		AMBA_VIDEO_FPS_59_94
#define YUV720P50_DEFAULT_FRAME_RATE		AMBA_VIDEO_FPS_50

#define HD720P_Y_ACT_PELS_PER_LINE		(1280)
#define HD720P_UV_ACT_PELS_PER_LINE		(HD720P_Y_ACT_PELS_PER_LINE >> 1)

/* 1080I */
#define YUV1080I_ACT_LINES_PER_FRM		1080
#define YUV1080I_ACT_LINES_PER_FLD		(YUV1080I_ACT_LINES_PER_FRM >> 1)
#define YUV1080I_DEFAULT_FRAME_RATE		AMBA_VIDEO_FPS_29_97
#define YUV1080I50_DEFAULT_FRAME_RATE		AMBA_VIDEO_FPS_50

#define HD1080I_Y_ACT_PELS_PER_LINE		(1920)
#define HD1080I_UV_ACT_PELS_PER_LINE		(HD1080I_Y_ACT_PELS_PER_LINE >> 1)

/* 1080P */
#define YUV1080P_ACT_LINES_PER_FRM		(1080)
#define YUV1080P_DEFAULT_FRAME_RATE		AMBA_VIDEO_FPS_59_94
#define YUV1080P50_DEFAULT_FRAME_RATE		AMBA_VIDEO_FPS_50

#define HD1080P_Y_ACT_PELS_PER_LINE		(1920)
#define HD1080P_UV_ACT_PELS_PER_LINE		(HD1080P_Y_ACT_PELS_PER_LINE >> 1)

/*=========================End AMBA_VIDEO_INFO================================*/


/*=========================Start AMBA UTILITIES===============================*/
#ifndef MIN
#define MIN(a, b) (((a) < (b)) ? (a) : (b))
#endif

#ifndef MAX
#define MAX(a, b) (((a) > (b)) ? (a) : (b))
#endif
/*==========================END AMBA UTILITIES================================*/

#endif

